<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
      <meta name="description" content="">
      <meta name="author" content="">
      <title>Hotel Offers</title>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <link rel="stylesheet" href="simple-sidebar.css">
     
   </head>
   <body >
      <div id="wrapper" ng-app="App" ng-controller="AppController">
         <div id="sidebar-wrapper" style="width:17%">
            <ul class="sidebar-nav">
               <li class="sidebar-brand">
                  <a href="#" class="text-center">
                  Filter Results
                  </a>
               </li>
               <form class="form-horizontal" ng-submit="SubmitData()" role="form">
                  <div class="form-group">
                     <label for="productType" class="col-sm-6 control-label" style="color:white">Product Type</label>
                     <div class="col-sm-6">
                        <input type="text"  class="form-control" ng-model="Data.productType" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="destinationName" class="col-sm-6 control-label" style="color:white">Destination Name</label>
                     <div class="col-sm-6">
                        <input type="text" id="destinationName" class="form-control" ng-model="Data.destinationName" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="regionIds" class="col-sm-6 control-label" style="color:white">Region</label>
                     <div class="col-sm-6">
                        <input type="text" id="regionIds" class="form-control" ng-model="Data.regionIds" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="destinationCity" class="col-sm-6 control-label" style="color:white">Destination City</label>
                     <div class="col-sm-6">
                        <input type="text" id="destinationCity" class="form-control" ng-model="Data.destinationCity" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="minTripStartDate" class="col-sm-6 control-label" style="color:white">Minimum Trip Start Date</label>
                     <div class="col-sm-6">
                        <input type="text" id="minTripStartDate" class="form-control" ng-model="Data.minTripStartDate" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="maxTripStartDate" class="col-sm-6 control-label" style="color:white">Maximum Trip Start Date</label>
                     <div class="col-sm-6">
                        <input type="text" id="maxTripStartDate" class="form-control" ng-model="Data.maxTripStartDate" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="lengthOfStay" class="col-sm-6 control-label" style="color:white">Length Of Stay</label>
                     <div class="col-sm-6">
                        <input type="text" id="lengthOfStay" class="form-control" ng-model="Data.lengthOfStay" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="maxStarRating" class="col-sm-6 control-label" style="color:white">Maximum Star Rating</label>
                     <div class="col-sm-6">
                        <input type="text" id="maxStarRating" class="form-control" ng-model="Data.maxStarRating" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="minStarRating" class="col-sm-6 control-label" style="color:white">Minimum Star Rating</label>
                     <div class="col-sm-6">
                        <input type="text" id="minStarRating" class="form-control" ng-model="Data.minStarRating" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="maxTotalRate" class="col-sm-6 control-label" style="color:white">Maximum Total Rate</label>
                     <div class="col-sm-6">
                        <input type="text" id="maxTotalRate" class="form-control" ng-model="Data.maxTotalRate" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="minTotalRate" class="col-sm-6 control-label" style="color:white">Minimum Total Rate</label>
                     <div class="col-sm-6">
                        <input type="text" id="minTotalRate" class="form-control" ng-model="Data.minTotalRate" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     <label for="maxGuestRating" class="col-sm-6 control-label" style="color:white">Maximum Guest Rating</label>
                     <div class="col-sm-6">
                        <input type="text" id="maxGuestRating" class="form-control" ng-model="Data.maxGuestRating" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <div class="form-group">
                     Raw Appeal Score
                     <label for="minGuestRating" class="col-sm-6 control-label" style="color:white">Minimum Guest Rating</label>
                     <div class="col-sm-6">
                        <input type="text" id="minGuestRating" class="form-control" ng-model="Data.minGuestRating" />
                     </div>
                     <div class="col-sm-6"></div>
                  </div>
                  <input type="submit" value="Filter" class="btn btn-primary col-sm-offset-3" /> 
               </form>
            </ul>
         </div>
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <h1 class="text-center">Hotel Offers</h1>
                     <hr>
                     </hr>
                  </div>
               </div>
            </div>
         </div>
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div ng-repeat="offer in content.offers.Hotel" >
                     <div style="border-color:black;border-style: solid;border-width: 3px;">
                        <div>
                           <h2 class="text-center">Offer Date Range</h2>
                           <hr>
                           </hr>
                           <p> Travel Start Date: {{offer.offerDateRange.travelStartDate[0]}} - {{offer.offerDateRange.travelStartDate[1]}} - {{offer.offerDateRange.travelStartDate[2]}} </p>
                           <p> Travel End Date: {{offer.offerDateRange.travelEndDate[0]}} - {{offer.offerDateRange.travelEndDate[1]}} - {{offer.offerDateRange.travelEndDate[2]}} </p>
                           <p> Length Of Stay : {{offer.offerDateRange.lengthOfStay}} </p>
                        </div>
                        <div>
                           <h2 class="text-center">Destination</h2>
                           <hr>
                           </hr>
                           <p> long Name: {{offer.destination.longName}} </p>
                           <p> Country: {{offer.destination.country}} </p>
                           <p> Province : {{offer.destination.province}} </p>
                           <p> City : {{offer.destination.city}} </p>
                        </div>
                        <div>
                           <h2 class="text-center">Hotel</h2>
                           <hr>
                           </hr>
                           <p> Hotel Name: {{offer.hotelInfo.hotelName}} </p>
                           <p> Description: {{offer.hotelInfo.description}} </p>
                           <p> Hotel Destination: {{offer.hotelInfo.hotelDestination}} </p>
                           <p> Hotel Long Destination: {{offer.hotelInfo.hotelLongDestination}} </p>
                           <p> Hotel Street Address: {{offer.hotelInfo.hotelStreetAddress}} </p>
                           <p> Hotel City: {{offer.hotelInfo.hotelCity}} </p>
                           <p> Hotel Province: {{offer.hotelInfo.hotelProvince}} </p>
                           <p> Hotel Country Code: {{offer.hotelInfo.hotelCountryCode}} </p>
                           <p> Hotel Location: {{offer.hotelInfo.hotelLocation}} </p>
                           <p> Hotel Star Rating: {{offer.hotelInfo.hotelStarRating}} </p>
                           <p> Hotel Guest Review Rating: {{offer.hotelInfo.hotelGuestReviewRating}} </p>
                           <p> Travel Start Date: {{offer.hotelInfo.travelStartDate}} </p>
                           <p> Travel End Date: {{offer.hotelInfo.travelEndDate}} </p>
                           <p> Car Package Score: {{offer.hotelInfo.carPackageScore}} </p>
                           <p> Promotion Description: {{offer.hotelInfo.promotionDescription}} </p>
                           <p> Promotion Amount: {{offer.hotelInfo.promotionAmount}} </p>
                        </div>
                        <div>
                           <h2 class="text-center">Hotel Urgency Info</h2>
                           <hr>
                           </hr>
                           <p> Number Of People Viewing: {{offer.hotelUrgencyInfo.numberOfPeopleViewing}} </p>
                           <p> Number Of People Booked: {{offer.hotelUrgencyInfo.numberOfPeopleBooked}} </p>
                           <p> Almost Sold Status: {{offer.hotelUrgencyInfo.almostSoldStatus}} </p>
                        </div>
                        <div>
                           <h2 class="text-center">Hotel Pricing Information</h2>
                           <hr>
                           </hr>
                           <p> Average Price: {{offer.hotelPricingInfo.averagePriceValue}} </p>
                           <p> Total Price: {{offer.hotelPricingInfo.totalPriceValue}} </p>
                           <p> Original Price Per Night: {{offer.hotelPricingInfo.originalPricePerNight}} </p>
                           <p> Hotel Total Base Rate: {{offer.hotelPricingInfo.hotelTotalBaseRate}} </p>
                           <p> Hotel Total Taxes And Fees: {{offer.hotelPricingInfo.hotelTotalTaxesAndFees}} </p>
                           <p> Currency: {{offer.hotelPricingInfo.currency}} </p>
                           <p> Hotel Total Mandatory Taxes And Fees: {{offer.hotelPricingInfo.hotelTotalMandatoryTaxesAndFees}} </p>
                           <p> PercentSavings: {{offer.hotelPricingInfo.percentSavings}} </p>
                        </div>
                        <div>
                           <hr>
                           </hr>
                           <h2 class="text-center">Hotel Scores</h2>
                           <p> Raw Appeal Score: {{offer.hotelScores.rawAppealScore}} </p>
                           <p> Moving Average Score: {{offer.hotelScores.movingAverageScore}} </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
<script>
    var App = angular.module('App', []);
    App.controller("AppController", function($scope, $http) {


                $scope.Data = {
                    scenario: "deal-finder",
                    page: "foo",
                    uid: "foo"
                };
                if ($scope.productType != null) {
                    $scope.Data['productType'] = $scope.productType;
                }

                if ($scope.destinationName != null) {
                    $scope.Data['destinationName'] = $scope.destinationName;
                }

                if ($scope.regionIds != null) {
                    $scope.Data['regionIds'] = $scope.regionIds;
                }

                if ($scope.destinationCity != null) {
                    $scope.Data['destinationCity'] = $scope.destinationCity;
                }

                if ($scope.minTripStartDate != null) {
                    $scope.Data['minTripStartDate'] = $scope.minTripStartDate;
                }

                if ($scope.maxTripStartDate != null) {
                    $scope.Data['maxTripStartDate'] = $scope.maxTripStartDate;
                }

                if ($scope.lengthOfStay != null) {
                    $scope.Data['lengthOfStay'] = $scope.lengthOfStay;
                }

                if ($scope.maxStarRating != null) {
                    $scope.Data['maxStarRating'] = $scope.maxStarRating;
                }

                if ($scope.minStarRating != null) {
                    $scope.Data['minStarRating'] = $scope.minStarRating;
                }

                if ($scope.maxTotalRate != null) {
                    $scope.Data['maxTotalRate'] = $scope.maxTotalRate;
                }

                if ($scope.minTotalRate != null) {
                    $scope.Data['minTotalRate'] = $scope.minTotalRate;
                }

                if ($scope.maxGuestRating != null) {
                    $scope.Data['maxGuestRating'] = $scope.maxGuestRating;
                }

                if ($scope.minGuestRating != null) {
                    $scope.Data['minGuestRating'] = $scope.minGuestRating;
                }

                $scope.params = function(data) {
                    let ret = [];
                    for (let d in data)
                        ret.push(encodeURIComponent(d) + '=' + encodeURIComponent(data[d]));
                    return ret.join('&');
                }

                 $scope.SubmitData = function() {
                    $http.get("http://localhost:8080/getOffers?" + $scope.params($scope.Data)).then(function(response) {
                        $scope.content = response.data;
                    })
                }

                $scope.URL = "http://localhost:8080/getOffers?" + $scope.params($scope.Data)

                $scope.SubmitData();
              });




	</script>
   </body>
</html>
